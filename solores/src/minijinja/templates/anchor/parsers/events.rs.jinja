{#
AUTO-GENERATED CODE - DO NOT MODIFY
This code is automatically generated by Solores
To make changes, update the Solores generation tool, not this file directly
Generated by Solores - https://github.com/yourorg/solores
#}
//! AUTO-GENERATED CODE - DO NOT MODIFY
//! This file is generated by Solores. To make changes, update the generation tool.
//! Generated by Solores - https://github.com/yourorg/solores

//! {{ crate_name }} Event Parsers
//! Anchor-style event parsing with discriminator support

{% if events and events|length > 0 %}
use crate::errors::EventParseError;

/// Program event types
#[derive(Clone, Debug)]
{% if has_serde %}
#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
{% endif %}
pub enum ProgramEvent {
    {% for event in events %}
    {% if event.docs %}
    {{ event.docs | multiline_docs }}
    {% endif %}
    {{ event.name }}(crate::events::{{ event.name }}),
    {% endfor %}
}

impl ProgramEvent {
    /// Parse event from raw bytes using discriminator
    pub fn try_parse(data: &[u8]) -> std::result::Result<Self, EventParseError> {
        if data.len() < 8 {
            return Err(EventParseError::DataTooShort { expected: 8, found: data.len() });
        }
        
        let discriminator: [u8; 8] = data[0..8].try_into().unwrap();
        
        {% for event in events %}
        if discriminator == crate::events::{{ event.name }}::discriminator() {
            return crate::events::{{ event.name }}::from_bytes(data).map(ProgramEvent::{{ event.name }});
        }
        {% endfor %}
        
        Err(EventParseError::DiscriminatorMismatch { 
            expected: [0; 8], 
            found: discriminator 
        })
    }

    /// Get parser identifier (static method)
    pub fn id() -> std::borrow::Cow<'static, str> {
        "{{ crate_name }}::EventParser".into()
    }
}



{% else %}
//! No events defined in this program
use crate::errors::EventParseError;

/// Program event types (empty)
#[derive(Clone, Debug)]
pub enum ProgramEvent {
    // No events defined in this program
}

impl ProgramEvent {
    /// Parse event from raw bytes (always fails for empty events)
    pub fn try_parse(_data: &[u8]) -> std::result::Result<Self, EventParseError> {
        Err(EventParseError::DeserializationFailed(
            "{{ crate_name }}::No events defined in this program".to_string()
        ))
    }

    /// Get parser identifier (static method)
    pub fn id() -> std::borrow::Cow<'static, str> {
        "{{ crate_name }}::EventParser".into()
    }
}


{% endif %}